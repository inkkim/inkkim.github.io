---
title: "Splunk ë¶„ì‚°í™˜ê²½ êµ¬ì¶•í•˜ê¸°"
categories: 
  - Splunk
toc: true
toc_label: "ëª©ì°¨"
toc_icon: "bars"
toc_sticky: true
readtime: true
excerpt: "ë¹…ë°ì´í„° í”Œë«í¼ Splunkì˜ ë¶„ì‚°í™˜ê²½ êµ¬ì¶•ìœ¼ë¡œ ê²€ìƒ‰ ì„±ëŠ¥ê³¼ ì•ˆì „ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤."
tags:
  - Splunk
  - ë¹…ë°ì´í„°
header:
  teaser: https://user-images.githubusercontent.com/60086878/111655652-2d5f1f00-884d-11eb-932a-305f20211d84.png
---

# Splunk ë°°í¬ë°©ì‹

 Splunkì˜ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ëŠ” **ê²€ìƒ‰**ì„ ë‹´ë‹¹í•˜ëŠ” Search Head, **ìˆ˜ì§‘**ì„ ë‹´ë‹¹í•˜ëŠ” Fowarder, **ì €ì¥**ì„ ë‹´ë‹¹í•˜ëŠ” Indexerê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì–´ë–¤ í˜•íƒœë¡œ ë°°í¬í•˜ëŠ”ì§€ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ Splunkì˜ ë°°í¬ë°©ì‹ì„ êµ¬ë¶„í•©ë‹ˆë‹¤.

## Standalone

![image](https://user-images.githubusercontent.com/60086878/105357987-eb44a300-5c38-11eb-8348-cdea6343bd51.png){: .align-center}
 
 Splunkì˜ ëª¨ë“  ê¸°ëŠ¥ê³¼ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ì— ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ê°€ì¥ ê°„ì†Œí™” ëœ í˜•íƒœì…ë‹ˆë‹¤. ì£¼ë¡œ PoCë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ë‚˜ ê°œì¸ì ì¸ í•™ìŠµ ìš©ë„ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. Splunkë¥¼ ì„¤ì¹˜í•˜ë©´ ë§Œë‚˜ê²Œ ë  ê°€ì¥ ê¸°ë³¸ì ì¸ ì„¤ì •ì…ë‹ˆë‹¤.

## Basic

![image](https://user-images.githubusercontent.com/60086878/105358377-72921680-5c39-11eb-9179-ac69dd58e414.png){: .align-center}

Standaloneê³¼ ë¹„ìŠ·í•œ ì„¤ì •ì´ì§€ë§Œ Splunk Serverì™€ Forwarderë¡œ ë°ì´í„° ì €ì¥ê³¼ ìˆ˜ì§‘ì´ êµ¬ë¶„ëœ í˜•íƒœì…ë‹ˆë‹¤. ForwarderëŠ” ë°ì´í„° ì†ŒìŠ¤ì— ìœ„ì¹˜í•˜ì—¬ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  Splunk Serverì— ì „ì†¡í•©ë‹ˆë‹¤. Splunk ServerëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ë©°, Forwarderì˜ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

## Multi-Instance

![image](https://user-images.githubusercontent.com/60086878/105358787-f64c0300-5c39-11eb-8e6b-b59ef5999d9e.png){: .align-center}

SplunkëŠ” ë¶„ì‚° í™˜ê²½ Clusteringì„ í†µí•´ ê²€ìƒ‰ê³¼ ì €ì¥ ì„±ëŠ¥ì´ í¬ê²Œ í–¥ìƒ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Multi-Instance ë°°í¬ë°©ì‹ì€ Splunkì˜ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ê°€ ëª¨ë‘ êµ¬ë¶„ëœ í˜•íƒœë¡œ ê°€ì¥ íš¨ìœ¨ì ì¸ ì•„í‚¤í…ì³ì…ë‹ˆë‹¤. **ê²€ìƒ‰**ì„ ë‹´ë‹¹í•˜ëŠ” Search Head, **ì €ì¥**ì„ ë‹´ë‹¹í•˜ëŠ” Indexer, **ìˆ˜ì§‘**ì„ ë‹´ë‹¹í•˜ëŠ” Fowarderê°€ ê°ê° ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì— ìœ„ì¹˜í•˜ì—¬ ì„œë¡œ ì—°ê²°ë˜ì–´ ìˆëŠ” í˜•íƒœì…ë‹ˆë‹¤. ì´ ì™¸ì—ë„ Indexer Clusteringì„ ê´€ë¦¬í•˜ëŠ” Cluster Master(CM)ì´ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# Search Head Clustering 

- Search Headë“¤ì„ ê·¸ë£¹í™”í•˜ì—¬ ê²€ìƒ‰ì„ ìœ„í•œ ì¤‘ì•™ ë¦¬ì†ŒìŠ¤ë¥¼ í˜•ì„±í•˜ëŠ” ê²ƒ

## Deployer

- ë‹¤ë¥¸ í´ëŸ¬ìŠ¤í„° Appì´ë‚˜ ì„¤ì •ê°’ì„ ë°°í¬í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ 
- í´ëŸ¬ìŠ¤í„° ì™¸ì— ìœ„ì¹˜í•˜ì—¬ ê° Indexerë“¤ì— ì„¤ì •ê°’ì´ë‚˜ Appì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì—­í•  

## Search Peers 

- Search Head Cluster ë‚´ Indexerë“¤ë¡œ ê° Indexerë“¤ì€ ë…ë¦½ì ì„ 

## Load Balancer 

- Userì™€ Cluster Memberë“¤ ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” third-party ì†Œí”„íŠ¸ì›¨ì–´ë¡œ UserëŠ” Search Head Cluseterì— í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆìŒ 
- í•˜ë‚˜ì˜ Indexerê°€ Captain ì—­í• ì„ í•˜ë©° í´ëŸ¬ìŠ¤í„° ë‚´ ë‹¤ì–‘í•œ í™œë™ì„ ì´ê´„í•¨ 
- ê° Indexerë“¤ì€ Search Request,Schedule Jobs, Replicate Artifacts, Update Configurations, Coordinate other activitiesë“±ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì„œë¡œ ìƒí˜¸ì‘ìš© í•  ìˆ˜ ìˆìŒ 

## Captain 

- ê¸°ë³¸ì ìœ¼ë¡œ Search Header Clusterë‚´ ë™ì ìœ¼ë¡œ ì„ ì •ë˜ë©°, ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì‚¬ìš©ìê°€ ì„ì˜ë¡œ ê³ ì •í•  ìˆ˜ë„ ìˆìŒ 
- Scheduling Jobsì„ í˜„ì¬ ì‘ì—…ëŸ‰ì— ë”°ë¼ ê° Indexerë“¤ì—ê²Œ í• ë‹¹ 
- ì¼ê´„ì ì¸ App ë°°í¬ì™€ Search Head Memberë“¤ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ Deployerê°€ í•„ìš” 
- ìµœì†Œ 3ê°œì˜ Search Headê°€ ìˆì–´ì•¼ Cluster êµ¬ì„± ê°€ëŠ¥ 

# Indexer Clustering 

- ë°ì´í„° ì†ì‹¤ì„ ì˜ˆë°©í•˜ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ë³µì œ í›„ ë¶„ì‚° ì €ì¥ 
- ì—¬ëŸ¬ Indexerë“¤ì„ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ ê°€ìš©ì„± í–¥ìƒ ë„ëª¨

## Cluster Master(CM)

ë°ì´í„°ë¥¼ ì €ì¥í•˜ì§€ ì•Šê³ , Peer Indexerì˜ ì‘ì—… ì¡°ì •í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

## Peer Indexer

Fowarderë¡œë¶€í„° ë°ì´í„°ë¥¼ ìˆ˜ì‹ ë°›ì•„ Bucketì— ì €ì¥í•˜ë©°, Indexerë¼ë¦¬ Clusteringì„ ì´ë£¹ë‹ˆë‹¤. Indexer Cluster ë‚´ ëª¨ë“  Peer Indexerë“¤ì€ ëª¨ë‘ CMê³¼ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©°, ê° Peer Indexerë“¤ì€ ë³µì œ í¬íŠ¸ë¥¼ í†µí•´ ì„œë¡œ í†µì‹ í•˜ì—¬ ë°ì´í„°ë¥¼ ë³µì œí•©ë‹ˆë‹¤.

# ë°ì´í„° íë¦„ë„

![image](https://user-images.githubusercontent.com/60086878/105367163-817dc680-5c43-11eb-9130-c69781bc801a.png){: .align-center}

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ë‹¤ë¤„ë³¼ ì•„í‚¤í…ì³ëŠ” Multi-Instance ë¶„ì‚° í™˜ê²½ì…ë‹ˆë‹¤. ì»´í“¨í„° ë¦¬ì†ŒìŠ¤ê°€ í•œì •ëœ ê´€ê³„ë¡œ ë¶„ì‚°í™˜ê²½ì— ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ìµœì†Œí•œì˜ ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ë¡œ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

ë°ì´í„°ëŠ” TA Appì„ í†µí•´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.  Search HeadëŠ” Forwarderë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ForwarderëŠ” ë‹¤ì‹œ Indexerë¡œ í•´ë‹¹ ë°ì´í„°ë¥¼ ë³´ëƒ…ë‹ˆë‹¤. 

ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ì€ IndexerëŠ” Bucketì— ì €ì¥í•˜ë©°, Cluster Masterë¥¼ ë§¤ê°œë¡œ ì—°ê²°ëœ Indexer Clusterì—ì„œ ë‹¤ë¥¸ Peerì—ê²Œ ì •ì˜ëœ Replication Factorë§Œí¼ ìì‹ ì˜ Bucketì„ ë³µì œí•©ë‹ˆë‹¤. ì´ë•Œ ê° IndexerëŠ” ë³µì œ í¬íŠ¸(8080)ì„ í†µí•´ ì„œë¡œ ìƒí˜¸ì‘ìš© í•˜ê²Œ ë©ë‹ˆë‹¤. 

DeployerëŠ” Search Head Clusteringì˜ ì„¤ì •ì„ ë‹´ë‹¹í•˜ë©°, ê° Search Headì— Jobì„ ë¶„ë°°í•©ë‹ˆë‹¤. ìµœì¢…ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ Search Headì—ì„œ SPLì„ í†µí•´ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì˜ ë°ì´í„°ê°€ ì €ì¥ëœ Indexer Clusterì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

# Splunk ë¶„ì‚°í™˜ê²½ êµ¬ì¶•

ë¶„ì‚°í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•´ Search Head(2), Indexer(3), Forwarder(1), Deployer(1), Cluster Master(1) ì´ 8ëŒ€ì˜ PCê°€ í•„ìš”í•©ë‹ˆë‹¤.

## ì¸ìŠ¤í„´ìŠ¤ êµ¬ì„±

ì¸ìŠ¤í„´ìŠ¤ êµ¬ì„±ì„ ìœ„í•´ Google Cloud Platform(GCP) VMì„ ì´ìš©í•´ 8ê°œ ëŒ€ì˜ PCë¥¼ êµ¬ì„± í•˜ê² ìŠµë‹ˆë‹¤. ì°¸ê³ ë¡œ GCPëŠ” í•œ ë¦¬ì „ì— ìµœëŒ€ 8ê°œ VM ì¸ìŠ¤í„´ìŠ¤ê¹Œì§€ ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤. ê°™ì€ ë¦¬ì „ì—ì„œ ìƒì„±ëœ VM ì¸ìŠ¤í„´ìŠ¤ëŠ” ê°™ì€ ëŒ€ì—­í­ì˜ ë‚´ë¶€ IPë¥¼ í• ë‹¹ë°›ê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ë¨¼ì € ê³µí†µì ì¸ ì„¤ì¹˜ì™€ í™˜ê²½ì„¤ì •ì€ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì§„í–‰í•©ë‹ˆë‹¤. ì´í›„ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¨¸ì‹  ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì–´ ë‚˜ë¨¸ì§€ 7ê°œì˜ ë³µì œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“  í›„ ë¶„ì‚°í™˜ê²½ì„ ì„¤ì •í•˜ëŠ” ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

ê° VM ì¸ìŠ¤í„´ìŠ¤ì˜ OSëŠ” Ubuntu 18.04.5, ì‚¬ì–‘ì€ n1-standard-1 (vCPUs: 1, RAM: 3.75GB)ë¡œ í†µì¼ í•˜ê² ìŠµë‹ˆë‹¤.

- n1-standard-1 (vCPUs: 1, RAM: 3.75GB) * 8 ì˜ˆìƒ ì²­êµ¬ ë¹„ìš©

![image](https://user-images.githubusercontent.com/60086878/105579362-7785d000-5dc9-11eb-9314-87e25464b1b1.png){: .align-center}

ì°¸ê³ ë¡œ n1-standart-1ì€ 9ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì•½ 26ì‹œê°„ ì‚¬ìš©í–ˆì„ ë•Œ $14.30 ê°€ëŸ‰ ì²­êµ¬ ê¸ˆì•¡ì´ ì˜ˆìƒë©ë‹ˆë‹¤. í•˜ì§€ë§Œ GCPì—ì„œëŠ” ì‹ ê·œ ê°€ì…ìì—ê²Œ 1ë…„ ì•ˆì— ì‚¬ìš©ì´ ê°€ëŠ¥í•œ $300 í¬ë ˆë”§ì„ ì œê³µí•˜ê³  ìˆìœ¼ë‹ˆ ì¶”ê°€ë¡œ ë¹„ìš©ì„ ì§€ë¶ˆí•  ì¼ì€ ì—†ìœ¼ë‹ˆ ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤!

GCPëŠ” ì¶”ê°€ ë¹„ìš©ì´ ì²­êµ¬ë  ê²½ìš° ë¯¸ë¦¬ ë“±ë¡ëœ ê²°ì œ ìˆ˜ë‹¨ìœ¼ë¡œ ì²­êµ¬ë˜ëŠ” ê²°ì œ ì‹œìŠ¤í…œìœ¼ë¡œ ìš´ì˜ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ GCPë¥¼ ìµœì´ˆ í™œì„±í™” í•  ë•Œ ë¹„ìš©ì´ ì²­êµ¬ë  ì¹´ë“œë¥¼ ë¨¼ì € ë“±ë¡í•˜ëŠ” ê³¼ì •ì´ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” íšŒì›ê°€ì… ê³¼ì •ì€ ìƒëµí•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

**1.GCP ê³„ì • í™œì„±í™”**

- GCPë¥¼ ìµœì´ˆ í™œì„±í™” í•œ í›„ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/60086878/105580040-532bf280-5dcd-11eb-874f-e4355a34a9c8.png){: .align-center}

**2.VM ì¸ìŠ¤í„´ìŠ¤ ìƒì„±**

- ì¢Œì¸¡ ìƒë‹¨ì˜ í–„ë²„ê±° ë²„íŠ¼ì—ì„œ **ì»´í“¨íŒ… - Compute Engine - ê°€ìƒë¨¸ì‹  - VM ì¸ìŠ¤í„´ìŠ¤ - ë§Œë“¤ê¸°**ì—ì„œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

- ì¸ìŠ¤í„´ìŠ¤ ì„¸ë¶€ì„¤ì •ì€ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.
  - ë¦¬ì „ : asia-northeast3(ì„œìš¸)
  - ë¨¸ì‹ êµ¬ì„±
    - ì‹œë¦¬ì¦ˆ : N1
    - ë¨¸ì‹  ìœ í˜• : n1-standard-1(vCPU 1ê°œ, 3.75GB ë©”ëª¨ë¦¬)
  - ë¶€íŒ… ë””ìŠ¤í¬ : Ubuntu 18.04 LTS
  - ë°©í™”ë²½ : HTTP(S) íŠ¸ë˜í”½ í—ˆìš©

![image](https://user-images.githubusercontent.com/60086878/105580290-d732aa00-5dce-11eb-9e85-1542daf3570a.png){: .align-center}

- ì•½ 1 - 2ë¶„ í›„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì´ ì™„ë£Œë©ë‹ˆë‹¤.

**3.ë°©í™”ë²½ ê·œì¹™ ì„¤ì •**

VM ì¸ìŠ¤í„´ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ GCP VPCì— ì˜í•´ ë„¤íŠ¸ì›Œí¬ê°€ ì™„ì „ ê²©ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë¶„ì‚°í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë¯€ë¡œ í•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­ê³¼ í¬íŠ¸ë¥¼ í—ˆìš© í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

Splunkì—ì„œ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì´ ì¤‘ì—ì„œ í†µì‹ ì„ í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” í¬íŠ¸ëŠ” `8089`, `9997`, `8080`ì…ë‹ˆë‹¤. ë˜í•œ Webì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” `8000` í¬íŠ¸ë„ ê°œë°©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/60086878/105580427-abfc8a80-5dcf-11eb-807f-2df82de803f5.png){: .align-center}

- ë°©í™”ë²½ ê·œì¹™ ì„¤ì •ì€ **í–„ë²„ê±° ë²„íŠ¼ - ë„¤íŠ¸ì›Œí‚¹ - VPC ë„¤íŠ¸ì›Œí¬ - ë°©í™”ë²½ - ë°©í™”ë²½ ê·œì¹™ ë§Œë“¤ê¸°**ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.
  - ëŒ€ìƒ : ë„¤íŠ¸ì›Œí¬ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤
  - ì†ŒìŠ¤ IP ë²”ìœ„ : 0.0.0.0/0
  - í”„ë¡œí† ì½œ ë° í¬íŠ¸ : ì§€ì •ëœ í”„ë¡œí† ì½œ ë° í¬íŠ¸
    - tcp : 8089, 9997, 8080, 8000

![image](https://user-images.githubusercontent.com/60086878/105580651-f92d2c00-5dd0-11eb-829d-ae46497c4971.png){: .align-center}

**4.Splunk ì„¤ì¹˜**

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Splunk ì œí’ˆ ì¤‘ì—ì„œë„ Splunk Enterpriseìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤. Splunkê°€ ìœ ìƒ ì†”ë£¨ì…˜ì´ê¸´ í•˜ì§€ë§Œ 60ì¼ ì²´í—˜íŒì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¨, ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•´ Splunk í™ˆí˜ì´ì§€ íšŒì›ê°€ì…ì´ ìš”êµ¬ë©ë‹ˆë‹¤. ì´ëŠ” ì´í›„ì— Splunk Appì„ ì„¤ì¹˜í•  ë•Œì—ë„ í•„ìš”í•˜ë‹ˆ ê°€ì…í•´ë‘ì‹œëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤.

- VM ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ìƒˆë¡œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ì˜ **ì—°ê²° - SSH**ë¥¼ í†µí•´ ì ‘ì†í•©ë‹ˆë‹¤.
  - ì›í™œí•œ ì„¤ì¹˜ë¥¼ ìœ„í•´ root ê³„ì •ì„ í™œì„±í™” í•©ë‹ˆë‹¤.

```bash
$ sudo passwd
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully

$ su
Password:
root@splunk:/home/$USER
```

- ì•„ë˜ ëª…ë ¹ì–´ë¡œ Splunk Enterpriseë¥¼ ë‹¤ìš´ë¡œë“œ í•©ë‹ˆë‹¤.
  - ReleaseëŠ” 2021.01.24 ê¸°ì¤€ `8.1.1` ì…ë‹ˆë‹¤.

```bash
$
$ wget -O /opt/splunk.tgz https://www.splunk.com/bin/splunk/DownloadActivityServlet?architecture=x86_64&platform=linux&version=8.1.1&product=splunk&filename=splunk-8.1.1-08187535c166-Linux-x86_64.tgz&wget=true
```

> ì¢…ì¢… http, https ì ‘ê·¼ì— ëŒ€í•œ ë°©í™”ë²½ ê·œì¹™ì„ í—ˆìš© í•´ë„ VM ì¸ìŠ¤í„´ìŠ¤ì—ì„œ `wget`ì´ë‚˜ `curl`ì„ ëª…ë ¹ì–´ë¡œ ìœ„ ì£¼ì†Œì— ëŒ€í•œ ë‹¤ìš´ë¡œë“œ íŒŒì¼ì„ ë°›ì•„ì˜¤ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ì›ì¸ì„ ì•„ì‹œëŠ” ë¶„ì€ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.ğŸ™

- ìœ„ ë°©ë²•ì´ ì•ˆ ë  ê²½ìš°, ë¡œì»¬ì—ì„œ ì„¤ì¹˜ íŒŒì¼ì„ ë°›ì•„ `scp` ëª…ë ¹ì–´ë¡œ ë„˜ê²¨ì£¼ëŠ” ë°©ë²•ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤. 
  - ë¡œì»¬ì—ì„œ [Splunk](www.splunk.com)ì—ì„œ ë¡œê·¸ì¸ í›„ **Products - Splunk Enterprise - Free Trial - Linux**ì—ì„œ .tgz ì„¤ì¹˜ íŒŒì¼ì„ ë‹¤ìš´ ë°›ìŠµë‹ˆë‹¤.
  - VM ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ssh key pairë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    - í•´ë‹¹ ê³¼ì •ì€ root ê³„ì •ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
  - ìƒì„±í•œ keyfile01(Private Key)ëŠ” ë³µì‚¬í•˜ì—¬ ë¡œì»¬ì— ì €ì¥í•©ë‹ˆë‹¤.

```bash
# VM ì¸ìŠ¤í„´ìŠ¤
$ ssh-keygen -t rsa -f ~/.ssh/keyfile01 -C root
$ chmod 400 ~/.ssh/keyfile01
$ cat ~/.ssh/keyfile01.pub >> authorized_keys

# ë¡œì»¬ (~/.ssh ì— keyfile01(Private Key) ì €ì¥ í›„ ì§„í–‰)
$ scp splunk-8.1.1-08187535c166-Linux-x86_64.tar root@xxx.xxx.xxx.xxx:/opt
```

- í•´ë‹¹ ì••ì¶• íŒŒì¼ì„ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì••ì¶• í•´ì œ í•´ì¤ë‹ˆë‹¤.

```bash
$ cd /opt
$ tar -xvzf splunk-8.1.1-08187535c166-Linux-x86_64.tar
```

- Splunk ì„¤ì¹˜ íŒŒì¼ì€ ì••ì¶•ì´ í•´ì œëœ í´ë” ë‚´ splunk/bin ìœ„ì¹˜ì— ìˆìŠµë‹ˆë‹¤.

```bash
$ cd splunk/bin
$ ./splunk start --accept-license
This appears to be your first time running this version of Splunk.

Splunk software must create an administrator account during startup. Otherwise, you cannot log in.
Create credentials for the administrator account.
Characters do not appear on the screen when you type in credentials.

Please enter an administrator username: <admin>
Password must contain at least:
   * 8 total printable ASCII character(s).
Please enter a new password: <Password>
Please confirm new password: <Password>

Waiting for web server at http://127.0.0.1:8000 to be available..... Done
```

ë§ˆì¹¨ë‚´ Splunk ì„œë²„ ì„¤ì¹˜ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ì´ì „ì— ë°©í™”ë²½ ê·œì¹™ ì¤‘ì— Web Portì— í•´ë‹¹í•˜ëŠ” 8000ì„ í—ˆìš© í•´ë‘ì—ˆìœ¼ë¯€ë¡œ, ì´ì œ í•´ë‹¹ VM ì¸ìŠ¤í„´ìŠ¤ì˜ `ì™¸ë¶€ IP:8000`ë¡œ Splunk ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/60086878/105704187-c199bd80-5f51-11eb-844d-fb85c4e0b726.png){: .align-center}

**5.ë°ì´í„° ìˆ˜ì§‘ ì„¤ì •**

Splunk ë¶„ì‚° í™˜ê²½ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ë¡œ ê° ì¸ìŠ¤í„´ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ ë°ì´í„°ë¥¼ ìˆ˜ì§‘ í•´ë³´ê² ìŠµë‹ˆë‹¤. Splunkì—ì„œ Linux í˜¹ì€ Unix ê³„ì—´ì˜ OSì—ì„œ ë¦¬ì†ŒìŠ¤ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ë°©ë²•ì€ **Splunk App for Unix and Linux**ì™€ **Splunk Add-on for Unix and Linux**ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. 

- ì•± - ì¶”ê°€ ì•± ì°¾ê¸° - nix ê²€ìƒ‰

![image](https://user-images.githubusercontent.com/60086878/105706356-c7dd6900-5f54-11eb-9bbd-260357f43ecb.png){: .align-center}

- **Splunk Add-on for Unix and Linux**ì™€ **Splunk App for Unix and Linux**ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
  - ì„¤ì¹˜ ì‹œ splunk í™ˆí˜ì´ì§€ì˜ ê³„ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
  - ëª¨ë‘ ì„¤ì¹˜ í›„ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œì‘ì„ í•©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/60086878/105706631-1f7bd480-5f55-11eb-8487-8ad431c93823.png){: .align-center}

- VM ì¸ìŠ¤í„´ìŠ¤ CLI í™˜ê²½ì—ì„œ Appì˜ ìˆ˜ì§‘ ì •ë³´ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.
  - Splunk ë‚´ Appë“¤ì€ `/splunk/etc/apps` ë‚´ì— ìœ„ì¹˜í•©ë‹ˆë‹¤.
  - í˜¹ì‹œ Vi í¸ì§‘ê¸°ê°€ ë‚¯ì„  ë¶„ë“¤ì€ [Vi ì‚¬ìš©ë²• ì™„ë²½ ê°€ì´ë“œ](https://inkkim.github.io/etc/Vi-ì‚¬ìš©ë²•-ì™„ë²½-ê°€ì´ë“œ/)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
  - Appì˜ default ë””ë ‰í† ë¦¬ì—ëŠ” ê¸°ë³¸ ì„¤ì • ê´€ë ¨ ê°ì¢… `.conf` íŒŒì¼ì´ ìœ„ì¹˜í•©ë‹ˆë‹¤.
  - Appì˜ local ë””ë ‰í† ë¦¬ëŠ” defaultì™€ ë™ì¼í•˜ê²Œ `.conf` íŒŒì¼ì´ ìœ„ì¹˜í•  ìˆ˜ ìˆìœ¼ë©°, default ë³´ë‹¤ ìš°ì„  ì ìš© ëŒ€ìƒì— ì†í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì¼ë°˜ì ìœ¼ë¡œ defaultì˜ `.conf`íŒŒì¼ì€ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê³ , ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„ì€ localì— ë³µì‚¬í•˜ì—¬ ìˆ˜ì •í•©ë‹ˆë‹¤.
  - `.conf` íŒŒì¼ì€ `[]` ìŠ¤íƒ ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •ì´ êµ¬ë¶„ë©ë‹ˆë‹¤.
    - [default] ìŠ¤íƒ ìëŠ” `.conf` íŒŒì¼ ë‚´ ê³µí†µì ìœ¼ë¡œ ì ìš©í•  ì„¤ì •ê°’ì„ ì •ì˜í•©ë‹ˆë‹¤.
      - ì €ì¥í•  ê¸°ë³¸ indexë¥¼ `index = ubuntu`ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
        - í•´ë‹¹ ì¸ë±ìŠ¤ê°€ ì—†ìœ¼ë©´ ìˆ˜ì§‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 

    - `inputs.conf`ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ìˆ˜ì§‘ ì˜µì…˜ì´ ë¹„í™œì„±í™” ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, í•„ìš”í•œ ìˆ˜ì§‘ ì˜µì…˜ë§Œ í™œì„±í™”í•©ë‹ˆë‹¤.
      - disabled = 1 -> 0 
  
```bash
$ mkdir /opt/splunk/etc/apps/Splunk_TA_nix/local
$ cp /opt/splunk/etc/apps/Splunk_TA_nix/defualt/inputs.conf /opt/splunk/etc/apps/Splunk_TA_nix/local/
$ vi /opt/splunk/etc/apps/Splunk_TA_nix/local/inputs.conf
```

![image](https://user-images.githubusercontent.com/60086878/105713003-f449b300-5f5d-11eb-95bc-0ab5fbe5df79.png){: .align-center}
![image](https://user-images.githubusercontent.com/60086878/105713207-2eb35000-5f5e-11eb-84ee-c6799983e1f7.png){: .align-center}

- ìˆ˜ì§‘í•  ë°ì´í„°ê°€ ì €ì¥ë  ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  - ì„¤ì • - ë°ì´í„° - ì¸ë±ìŠ¤ - ìƒˆë¡œ ë§Œë“¤ê¸°ì¸ë±ìŠ¤ì—ì„œ **ubutu** ì¸ë±ìŠ¤ ì €ì¥

![image](https://user-images.githubusercontent.com/60086878/105713647-bd27d180-5f5e-11eb-9462-b6bedfb8660d.png){: .align-center}

- App ë° ì¸ë±ìŠ¤ ì„¤ì • ë™ê¸°í™”ë¥¼ ìœ„í•´ ì„œë²„ë¥¼ ì¬ì‹œì‘ í•©ë‹ˆë‹¤.
  - ì„¤ì • - ì‹œìŠ¤í…œ - ì„œë²„ ì»¨íŠ¸ë¡¤ - Splunk ë‹¤ì‹œ ì‹œì‘

![image](https://user-images.githubusercontent.com/60086878/105713923-08da7b00-5f5f-11eb-869b-2d697ae6d415.png){: .align-center}

- Search & Report Appì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ë°ì´í„° ìˆ˜ì§‘ í˜„í™©ì„ í™•ì¸í•©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/60086878/105714232-6f5f9900-5f5f-11eb-96d8-1d66d299eb1e.png){: .align-center}

ì—¬ê¸°ê¹Œì§€ Hostì˜ ë¦¬ì†ŒìŠ¤ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” Standalone Splunk Server ì„¤ì •ì´ ì™„ë£Œ ëìŠµë‹ˆë‹¤.

**6.VM ì¸ìŠ¤í„´ìŠ¤ ë³µì œ**

GCPì—ì„œëŠ” ìŠ¤ëƒ…ìƒ· ê¸°ëŠ¥ì²˜ëŸ¼ í˜„ì¬ ìƒíƒœë¥¼ ì´ë¯¸ì§€ë¡œ ë§Œë“œëŠ” ë¨¸ì‹  ì´ë¯¸ì§€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ì œ ê³µí†µì ì¸ ì„¤ì •ì€ ë§ˆë¬´ë¦¬ ëìœ¼ë‹ˆ ì´ VM ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœë¥¼ ë¨¸ì‹  ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê³ , ì´ë¥¼ ì´ìš©í•´ ë‚˜ë¨¸ì§€ 7ê°œì˜ VM ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„± í•´ë³´ê² ìŠµë‹ˆë‹¤.

- í•´ë‹¹ VM ì¸ìŠ¤í„´ìŠ¤ì˜ ë©”ë‰´ - ìƒˆ ë¨¸ì‹  ì´ë¯¸ì§€ì—ì„œ ë¨¸ì‹  ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/60086878/105715660-388a8280-5f61-11eb-9ad6-b5477d371e33.png){: .align-center}

- Compute Engine - ê°€ìƒ ë¨¸ì‹  - VM ì¸ìŠ¤í„´ìŠ¤ - ì¸ìŠ¤í„´ìŠ¤ ë§Œë“¤ê¸° - ë¨¸ì‹  ì´ë¯¸ì§€ì˜ ìƒˆ VM ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ìƒˆë¡œ ìƒì„±í•œ ë¨¸ì‹  ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  - NGD(~~ë…¸ê°€ë‹¤~~) Methodë¡œ ë‚˜ë¨¸ì§€ 7ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/60086878/105719003-2a3e6580-5f65-11eb-93ca-6dfe6605b6a9.png){: .align-center}

![image](https://user-images.githubusercontent.com/60086878/105720631-fbc18a00-5f66-11eb-8e44-9c3278f48f02.png){: .align-center}

## ë¶„ì‚°í™˜ê²½ ì„¤ì •

Splunk ë¶„ì‚°í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•´ ê° ì¸ìŠ¤í„´ìŠ¤ì— ì„ì˜ë¡œ Splunk ì„œë²„ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì§€ì •í•˜ê² ìŠµë‹ˆë‹¤.

|Splunk ì„œë²„|VM ì¸ìŠ¤í„´ìŠ¤|ì—­í• 
|----------|---------|---|
|Cluster Master(CM)|splunk0|Indexer Clusterì—ì„œ Peer Indexer ê´€ë¦¬|
|Indexer|splunk1/splunk2/splunk3|ë°ì´í„°ë¥¼ Forwarderì—ì„œ ì „ë‹¬ë°›ì•„ ì €ì¥í•˜ê³ , Search Headë¡œë¶€í„° SPLë¡œ ë°ì´í„° ì¡°íšŒ ìš”ì²­ì„ ì²˜ë¦¬|
|Forwarder|splunk4|ë°ì´í„° ìˆ˜ì§‘ í›„ Indexerì—ê²Œ ì „ë‹¬|
|Deployer|splunk5|Search Headì— ëŒ€í•œ ì„¤ì •ê³¼ App ì •ë³´ë¥¼ ì¼ê´„ ë°°í¬ ë° ê´€ë¦¬|
|Search Head|splunk6/splunk7|SPLë¬¸ì„ í†µí•´ Indexerì— ë°ì´í„° ì¡°íšŒ ìš”ì²­|

ë¨¼ì € 8ê°œ ì„œë²„ ëª¨ë‘ ì¼ê´„ì ìœ¼ë¡œ Splunk Serverê°€ ë¶€íŒ… ì‹œ ìë™ì‹œì‘ ë˜ë„ë¡ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤. ì°¸ê³ ë¡œ Macì€ Iterm2ë‚˜ WindowsëŠ” MobaXtermê³¼ ê°™ì€ íˆ´ì„ ì´ìš©í•˜ì‹œë©´ ë©€í‹° ì„¸ì…˜ê´€ë¦¬í•˜ëŠ” ë° ìˆ˜ì›”í•©ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” Macì˜ Iterm2ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

Iterm2ì—ì„œ `Command + d`ëŠ” Split ì„¸ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë•Œ `Option + Command + i`í‚¤ë¥¼ ëˆ„ë¥´ë©´ ë‹¤ì¤‘ ì…ë ¥ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ì´ì  ì°¸ê³ í•˜ì—¬ ë©€í‹° ì„¸ì…˜ì—ì„œ ë™ì¼í•œ ì‘ì—…ì„ í•´ì•¼í•  ë•Œ ìš”ê¸´í•˜ê²Œ ì‚¬ìš©í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤ :)

![image](https://user-images.githubusercontent.com/60086878/106152770-2a3aa180-61c1-11eb-90bb-6d89581eb305.png){: .align-center}


```bash
# Local
$ ssh -i ~/.ssh/keyfile01 root@<VM ì¸ìŠ¤í„´ìŠ¤ ì™¸ë¶€IP>

# ê° VM ì¸ìŠ¤í„´ìŠ¤
$ /opt/splunk/bin/./splunk stop
$ /opt/splunk/bin/./splunk start --accept-license
$ /opt/splunk/bin/./splunk enable boot-start 
```

ë˜í•œ ê° ì„œë²„ì˜ ì—­í• ì„ ëª…ì‹œí•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ Splunk ì„œë²„ì˜ ë³„ì¹­ì„ ì •ì˜í•©ë‹ˆë‹¤.

- ì„¤ì • - ì‹œìŠ¤í…œ - ì„œë²„ ì„¤ì • - ì¼ë°˜ ì„¤ì •ì—ì„œ Splunk ì„œë²„ ì´ë¦„ ë° ê¸°ë³¸ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ ê° Splunk ì„œë²„ ì—­í• ì— ë§ê²Œ ìˆ˜ì •

![image](https://user-images.githubusercontent.com/60086878/106154637-2871dd80-61c3-11eb-9a83-6180b1a738ab.png){: .align-center}

- VM ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ëª¨ë“  Splunk Server Restart

```bash
$ /opt/splunk/bin/./splunk restart
```

**1.Search Head -> Forwarder**

ë¨¼ì € Search Headì—ì„œ ìˆ˜ì§‘ì¤‘ì¸ ë¦¬ì†ŒìŠ¤ ë°ì´í„°ë¥¼ Forwarderì— ì „ë‹¬ í•˜ê² ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ë°˜ë“œì‹œ ì•„ì…”ì•¼ í•  ê²ƒì€ ì›ë˜ **Search HeadëŠ” ì›ë˜ ì˜¤ë¡¯ì´ Indexerì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ì—­í• **ì´ì§€ë§Œ ì´ë²ˆ ê¸€ì—ì„œëŠ” ì ì€ ìˆ˜ì˜ VM ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¶„ì‚°í™˜ê²½ì„ êµ¬ì¶• í•˜ë‹¤ë³´ë‹ˆ Universal Forwarderì˜ ì—­í• ë„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

- Forwarderì—ì„œëŠ” ì„¤ì • - ë°ì´í„° - ì „ë‹¬ ë° ìˆ˜ì‹  - ë°ì´í„° ìˆ˜ì‹  - ìˆ˜ì‹  ì„¤ì • - ìƒˆ ìˆ˜ì‹  í¬íŠ¸ì—ì„œ 9997 ìˆ˜ì‹ í¬íŠ¸ ì¶”ê°€

![image](https://user-images.githubusercontent.com/60086878/106160573-52c69980-61c9-11eb-822f-ae10d3ff33dd.png){: .align-center}

- ê° Search Headì—ì„œ ì„¤ì • - ë°ì´í„° - ì „ë‹¬ ë° ìˆ˜ì‹  - ë°ì´í„° ì „ë‹¬ - ì „ë‹¬ ì„¤ì • - ìƒˆ ì „ë‹¬ í˜¸ìŠ¤íŠ¸ë¥¼ í†µí•´ Forwarderë¥¼ ì¶”ê°€
  - IPëŠ” í•´ë‹¹ VM ì¸ìŠ¤í„´ìŠ¤(Forwarder:splunk4)ì˜ ë‚´ë¶€ IP ì‚¬ìš©
  - PortëŠ” ìˆ˜ì‹  í¬íŠ¸ 9997

![image](https://user-images.githubusercontent.com/60086878/106160467-3296da80-61c9-11eb-8568-e6456c3de554.png){: .align-center}

- Forwarderì—ì„œ Search & Reporting ì•±ì„ í†µí•´ ë¦¬ì†ŒìŠ¤ ë°ì´í„°ë¥¼ ìˆ˜ì§‘ì¤‘ì¸ `Ubuntu`ë¼ëŠ” Indexë¥¼ ì¡°íšŒí•˜ì—¬ ìˆ˜ì§‘ í˜„í™© í™•ì¸
  - Forwarder, Search Head 1, 2 ë°ì´í„° ëª¨ë‘ ì¡°íšŒ ê°€ëŠ¥

![image](https://user-images.githubusercontent.com/60086878/106160317-0bd8a400-61c9-11eb-8d88-492f2db097b4.png){: .align-center}

**2.Forwarder -> Indexer**

ForwarderëŠ” ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ ê° Indexerì— ì „ë‹¬í•˜ê³ , IndexerëŠ” ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ Bucketì— ì €ì¥í•©ë‹ˆë‹¤. ì´ì „ ë°©ë²•ê³¼ ë™ì¼í•˜ì§€ë§Œ ì´ë²ˆì—ëŠ” Forwarderê°€ ê° Indexerì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³ , ê° IndexerëŠ” ìˆ˜ì‹ í•©ë‹ˆë‹¤.

- ê° Indexerì—ì„œ ì„¤ì • - ë°ì´í„° - ì „ë‹¬ ë° ìˆ˜ì‹  - ë°ì´í„° ìˆ˜ì‹  - ìˆ˜ì‹  ì„¤ì • - ìƒˆ ìˆ˜ì‹  í¬íŠ¸ì—ì„œ 9997 ìˆ˜ì‹ í¬íŠ¸ ì¶”ê°€

![image](https://user-images.githubusercontent.com/60086878/106160622-5f4af200-61c9-11eb-8686-a34795c1429d.png){: .align-center}

- Forwarderì—ì„œ ì„¤ì • - ë°ì´í„° - ì „ë‹¬ ë° ìˆ˜ì‹  - ë°ì´í„° ì „ë‹¬ - ì „ë‹¬ ì„¤ì • - ìƒˆ ì „ë‹¬ í˜¸ìŠ¤íŠ¸ë¥¼ í†µí•´ ê° Indexer ì¶”ê°€
  - IPëŠ” í•´ë‹¹ VM ì¸ìŠ¤í„´ìŠ¤(Indexer:splunk1~3)ì˜ ë‚´ë¶€ IP ì‚¬ìš©
  - PortëŠ” ìˆ˜ì‹  í¬íŠ¸ 9997

![image](https://user-images.githubusercontent.com/60086878/106160753-83a6ce80-61c9-11eb-8efd-1abb486a0b76.png){: .align-center}

**3. Cluster Master <-> Indexers**

ë°ì´í„° ì €ì¥ ì•ˆì •ì„±ê³¼ ê²€ìƒ‰ íš¨ìœ¨ì„±ì„ ìœ„í•œ ì¸ë±ì„œ í´ëŸ¬ìŠ¤í„°ë§ì„ í™œì„±í™”í•˜ê¸° ìœ„í•˜ì—¬ Cluster Master ì¦‰, ë§ˆìŠ¤í„° ë…¸ë“œë¡œ í™œì„±í™” í•©ë‹ˆë‹¤. ê° Indexerë“¤ì€ CMì˜ í”¼ì–´ ë…¸ë“œë¡œ í™œì„±í™” í•©ë‹ˆë‹¤. 

- Cluster Masterì—ì„œ ì„¤ì • - ë¶„ì‚° í™˜ê²½ - ì¸ë±ì„œ í´ëŸ¬ìŠ¤í„°ë§ - ì¸ë±ì„œ í´ëŸ¬ìŠ¤í„°ë§ í™œì„±í™” - ë§ˆìŠ¤í„° ë…¸ë“œ ì„ íƒ
  - ë³´ì•ˆí‚¤ ì„¤ì • í›„ ë§ˆìŠ¤í„° ë…¸ë“œ í™œì„±í™” í›„ ì¬ì‹œì‘

![image](https://user-images.githubusercontent.com/60086878/106161600-8bb33e00-61ca-11eb-87e3-50b9bdb88b54.png){: .align-center}

- ê° Indexerì—ì„œ ì„¤ì • - ë¶„ì‚° í™˜ê²½ ì¸ë±ì„œ í´ëŸ¬ìŠ¤í„°ë§ - ì¸ë±ì„œ í´ëŸ¬ìŠ¤í„°ë§ í™œì„±í™” - í”¼ì–´ ë…¸ë“œ ì„ íƒ
  - ë§ˆìŠ¤í„° URI : Cluster Masterì˜ ë‚´ë¶€ IP
  - í”¼ì–´ ë³µì œ í¬íŠ¸ : 8080
  - ë³´ì•ˆí‚¤ : ë§ˆìŠ¤í„° ë…¸ë“œ í™œì„±í™” ì‹œ ì„¤ì •í•œ ë³´ì•ˆí‚¤
  - í´ëŸ¬ìŠ¤í„° ë ˆì´ë¸” : cm
  - í”¼ì–´ë…¸ë“œ í™œì„±í™” í›„ ì¬ì‹œì‘

![image](https://user-images.githubusercontent.com/60086878/106161796-be5d3680-61ca-11eb-9b1e-25e0c1b93cb7.png){: .align-center}

- ê° Search Headì—ì„œ ì„¤ì • - ë¶„ì‚° í™˜ê²½ ì¸ë±ì„œ í´ëŸ¬ìŠ¤í„°ë§ - ì¸ë±ì„œ í´ëŸ¬ìŠ¤í„°ë§ í™œì„±í™” - ê²€ìƒ‰ í—¤ë“œ ë…¸ë“œ ì„ íƒ
  - ë§ˆìŠ¤í„° URI : Cluster Masterì˜ ë‚´ë¶€ IP
  - ë³´ì•ˆí‚¤ : ë§ˆìŠ¤í„° ë…¸ë“œ í™œì„±í™” ì‹œ ì„¤ì •í•œ ë³´ì•ˆí‚¤
  - ê²€ìƒ‰ í—¤ë“œ ë…¸ë“œ í™œì„±í™” í›„ ì¬ì‹œì‘




ì‘ì„±ì¤‘ì…ë‹ˆë‹¤ . . .  ğŸš§

# ì°¸ê³ 

- [About distributed search](https://docs.splunk.com/Documentation/Splunk/8.1.1/DistSearch/Whatisdistributedsearch)
- [Deploy a distributed search environment](https://docs.splunk.com/Documentation/Splunk/8.1.1/DistSearch/Overviewofconfiguration)